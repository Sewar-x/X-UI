# XHTTP

xhttp æ¨¡å—æ˜¯åŸºäº [axios](https://www.axios-http.cn/docs/intro) äºŒæ¬¡å°è£…ï¼Œåœ¨ axios çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€äº›é€‚é…åå°ç®¡ç†ç³»ç»Ÿçš„åŠŸèƒ½ã€‚

## åŠŸèƒ½

> axios åŠŸèƒ½å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š[èµ·æ­¥ | Axiosä¸­æ–‡æ–‡æ¡£ | Axiosä¸­æ–‡ç½‘ (axios-http.cn)](https://www.axios-http.cn/docs/intro)

xhttp é™¤äº†æ”¯æŒ axios çš„åŸºç¡€åŠŸèƒ½ä¹‹å¤–ï¼Œå°è£…äº†ä»¥ä¸‹åŠŸèƒ½ï¼š

| åŠŸèƒ½                           | ä»‹ç»                                                         |
| ------------------------------ | ------------------------------------------------------------ |
| æ¶ˆæ¯æç¤º                       | æˆåŠŸ/å¤±è´¥/é”™è¯¯ç­‰æ¶ˆæ¯å’Œæ¨¡æ€å¼¹çª—æç¤º åœ¨æµè§ˆå™¨ç«¯ä½¿ç”¨æ¶ˆæ¯å’Œæ¨¡æ€å¼¹çª—æç¤º åœ¨node ç«¯ä½¿ç”¨ console æ‰“å° |
| å¿½ç•¥é‡å¤è¯·æ±‚                   |                                                              |
| è¶…æ—¶é‡è¯•                       |                                                              |
| åŠ å…¥è¯·æ±‚æ—¶é—´æˆ³                 | è¯·æ±‚æ—¶é—´æˆ³å¯ä»¥ç”¨äºè°ƒè¯•æ¥å£                                   |
| ä¸Šä¼ æ–‡ä»¶é»˜è®¤é‡‡ç”¨ formdata æ ¼å¼ | ä¸Šä¼ æ–‡ä»¶é»˜è®¤é…ç½®ï¼š  `header:{Content-type: FORM_DATA = 'multipart/form-data;charset=UTF-8',}` |
| å›ºå®šçŠ¶æ€ç æç¤ºå’Œå¤„ç†           |                                                              |
| ajax é”™è¯¯æ—¥å¿—æ”¶é›†é’©å­          | `addAjaxErrorInfo`                                           |
| å…¨å±€è¯·æ±‚ token                 |                                                              |
| **token æ ¡éªŒ**                 |                                                              |
| **token åˆ·æ–°**                 | ä¼ å…¥ token è¿‡æœŸæ—¶é—´å’Œæ—¶é—´é—´éš”ï¼Œåœ¨æ¯æ¬¡è¯·æ±‚ä¹‹å‰è‡ªåŠ¨åˆ¤æ–­å½“å‰æ—¶é—´ä¸ token è¿‡æœŸæ—¶é—´å·®å°äºæŒ‡å®šåˆ·æ–°é—´éš”æ—¶é—´ï¼Œå¦‚æœæ˜¯ï¼Œè‡ªåŠ¨è¯·æ±‚åˆ·æ–° Token æ¥å£åˆ·æ–° Tokenï¼Œå¹¶å°†åç»­è¯·æ±‚ç¼“å­˜ï¼›å¾…åˆ·æ–° Token æ¥å£è¿”å›åï¼Œä½¿ç”¨æ–°çš„ token è¯·æ±‚ç¼“å­˜çš„è¯·æ±‚ã€‚ |
| é”™è¯¯æ¸…é™¤ token                 |                                                              |
| é”™è¯¯é€€å‡ºç™»å½•                   |                                                              |
| æ ¼å¼åŒ–è¿”å›æ ¼å¼                 | æ ¼å¼åŒ–è¿”å›æ ¼å¼                                               |
| æä¾›è¯·æ±‚å¤„ç†é’©å­               |                                                              |
|                                | è¯·æ±‚ä¹‹å‰å¤„ç†é…ç½®: `beforeRequestHook`                        |
|                                | è¯·æ±‚æˆåŠŸå¤„ç†: `transformRequestData`                         |
|                                | è¯·æ±‚å¤±è´¥å¤„ç†: `requestCatch`                                 |
|                                | è¯·æ±‚ä¹‹å‰çš„æ‹¦æˆªå™¨: `requestInterceptors`                      |
|                                | è¯·æ±‚ä¹‹åçš„æ‹¦æˆªå™¨: `responseInterceptors`                     |
|                                | è¯·æ±‚ä¹‹å‰çš„æ‹¦æˆªå™¨é”™è¯¯å¤„ç†: `requestInterceptorsCatch`         |
|                                | è¯·æ±‚ä¹‹åçš„æ‹¦æˆªå™¨é”™è¯¯å¤„ç†: `responseInterceptorsCatch`        |

é»˜è®¤çŠ¶æ€ç æ£€æŸ¥ï¼š

| çŠ¶æ€ç  | æç¤ºæ–‡æ¡ˆ                                | æ“ä½œ |
| ------ | --------------------------------------- | ---- |
| 400    | é»˜è®¤é”™è¯¯ï¼Œè¿”å›æœåŠ¡ç«¯è¿”å›æ¶ˆæ¯æç¤º        |      |
| 401    | ç”¨æˆ·æ²¡æœ‰æƒé™ï¼ˆä»¤ç‰Œã€ç”¨æˆ·åã€å¯†ç é”™è¯¯ï¼‰! |      |
| 403    | ç”¨æˆ·å¾—åˆ°æˆæƒï¼Œä½†æ˜¯è®¿é—®æ˜¯è¢«ç¦æ­¢çš„!       |      |
| 404    | ç½‘ç»œè¯·æ±‚é”™è¯¯,æœªæ‰¾åˆ°è¯¥èµ„æº!              |      |
| 405    | ç½‘ç»œè¯·æ±‚é”™è¯¯,è¯·æ±‚æ–¹æ³•æœªå…è®¸!            |      |
| 408    | ç½‘ç»œè¯·æ±‚è¶…æ—¶!                           |      |
| 500    | æœåŠ¡å™¨é”™è¯¯,è¯·è”ç³»ç®¡ç†å‘˜!                |      |
| 501    | ç½‘ç»œæœªå®ç°!                             |      |
| 502    | ç½‘ç»œé”™è¯¯!                               |      |
| 503    | æœåŠ¡ä¸å¯ç”¨ï¼ŒæœåŠ¡å™¨æš‚æ—¶è¿‡è½½æˆ–ç»´æŠ¤!       |      |
| 504    | ç½‘ç»œè¶…æ—¶!                               |      |
| 505    | httpç‰ˆæœ¬ä¸æ”¯æŒè¯¥è¯·æ±‚!                   |      |





## å®‰è£…

å¯ä»¥å¼•å…¥ xw-ui åº“

```shell
npm install xw-ui
```

ä¹Ÿå¯ä»¥ç›´æ¥å•ç‹¬ä½¿ç”¨ xhttp åº“

```shell
npm install xhttp
```





## ä½¿ç”¨

### TypeScript

å¼•å…¥ xhttp åº“:

```typescript
import { createXhttp } from 'xw-ui/xhttp'

export default createXhttp({
    tokenKey: 'test-token', // token keyå€¼ï¼Œä¼ å…¥token keyå€¼ï¼Œé»˜è®¤ä½¿ç”¨å†…éƒ¨è·å–æ–¹æ³•
    tokenExpires: 1, // token è¿‡æœŸæ—¶é—´
    storageType: 'cookie', // å­˜å‚¨token æ–¹æ³•
    addAjaxErrorInfo: (error) => {
        console.log("ğŸš€ ==========é”™è¯¯æ—¥å¿—æ”¶é›†æ–¹æ³•===========", error)
    },
    getToken: () => {
        console.log('==============è·å–æœ¬åœ°token æ–¹æ³•============')
        return '1234567890'
    },
    logout: () => {
        console.log('==============logout é€€å‡ºç™»å½•æ–¹æ³•============')
    },
    statusMap: {
        400: {
            msg: '400çŠ¶æ€ç ',
            callback: () => {
                console.log('=============400çŠ¶æ€ç ç›¸å…³å¤„ç†å‡½æ•°===============')
            },
        },
        401: {
            msg: '401çŠ¶æ€ç ',
            callback: () => {
                console.log('=============401çŠ¶æ€ç ç›¸å…³å¤„ç†å‡½æ•°===============')
            },
        },
        402: {
            msg: '402çŠ¶æ€ç ',
            callback: () => {
                console.log('=============402çŠ¶æ€ç ç›¸å…³å¤„ç†å‡½æ•°===============')
            },
        },
        404: {
            msg: '404çŠ¶æ€ç ',
            callback: () => {
                console.log('=============404çŠ¶æ€ç ç›¸å…³å¤„ç†å‡½æ•°===============')
            },
        },
        500: {
            msg: '500çŠ¶æ€ç ',
            callback: () => {
                console.log('=============404çŠ¶æ€ç ç›¸å…³å¤„ç†å‡½æ•°===============')
            },
        }
    }
},
    {
        requestOptions: {
            urlPrefix: 'api'
        }
    });

```

ä½¿ç”¨ xhttp åº“ï¼š

```	typescript
import defHttp from '@/packages/http/index'

interface AccountInfoModel {
    email: string;
    name: string;
    introduction: string;
    phone: string;
    address: string;
}

export function setAccountInfo(params: AccountInfoModel) {
    return defHttp.post<AccountInfoModel>(
        {
            url: '/acount/post',
            params,
        },
        {
            errorMessageMode: 'modal',
        },
    );
}

export function getAccountInfo(params: AccountInfoModel) {
    return defHttp.get(
        {
            url: '/acount/get',
            params
        },
        {
            successMessageMode: 'message',
            errorMessageMode: 'message',
        },
    );
}

```



### è¯·æ±‚å‚æ•°

| æ–¹æ³•                  | å‚æ•°                        | å‚æ•°å¯é€‰å€¼                           | è¯´æ˜           |
| --------------------- | --------------------------- | ------------------------------------ | -------------- |
| `get(options,msgOpt)` | options                     |                                      | axios è¯·æ±‚å‚æ•° |
|                       | msgOpt                      | errorMessageModeã€successMessageMode | æ¶ˆæ¯ç±»å‹å‚æ•°   |
|                       | `msgOpt.errorMessageMode`   | modalã€messageã€none                 | é”™è¯¯æ¶ˆæ¯æç¤º   |
|                       | `msgOpt.successMessageMode` | modalã€messageã€none                 | æˆåŠŸæ¶ˆæ¯æç¤º   |

### å“åº”æ•°æ®

é»˜è®¤æœåŠ¡ç«¯è¿”å›é»˜è®¤ä¸ºä»¥ä¸‹æ•°æ®æ ¼å¼ï¼š

```json
{
    'code': 0, // 0 è¡¨ç¤ºæˆåŠŸï¼Œ-1 è¡¨ç¤ºå¤±è´¥
    'message': 'è¿”å›æ¶ˆæ¯',
    'result': {} // å“åº”ç»“æ„
    }
}
```

å¦‚æœæœåŠ¡ç«¯è¿”å›æ¥å£æ— æ³•è¿”å›ä»¥ä¸Šå›ºå®šæ ¼å¼ï¼Œåˆ™éœ€è¦åœ¨ `createXhttp` ç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥ `formatResponse` æ–¹æ³•ï¼Œå¯¹è¿”å›çš„æ•°æ®æ ¼å¼è¿›è¡Œæ ¼å¼åŒ–ã€‚

å¦‚æœåŠ¡ç«¯è¿”å›å¦‚ä¸‹æ ¼å¼ï¼š

```js
{
    "Code": 200, // çŠ¶æ€ç 
    "Msg": "OK", // æç¤ºä¿¡æ¯
    "Data": {} // æ•°æ®
}
```

åˆ™åœ¨åˆ›å»º http å®ä¾‹æ—¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š

```js
import { createXhttp } from 'xw-ui/xhttp'

export default createXhttp({
    tokenKey: 'test-token', // token keyå€¼ï¼Œä¼ å…¥token keyå€¼ï¼Œé»˜è®¤ä½¿ç”¨å†…éƒ¨è·å–æ–¹æ³•
    tokenExpires: 1, // token è¿‡æœŸæ—¶é—´
    formatResponse: (data)=> {//å‚æ•° formatResponse æ–¹æ³•ï¼Œå¯¹è¿”å›çš„æ•°æ®æ ¼å¼è¿›è¡Œæ ¼å¼åŒ–ã€‚
        return { // å°†æœåŠ¡ç«¯è¿”å›çš„æ•°æ®æ ¼å¼åŒ–
            code: data.Code,
            message: data.Msg,
            result: data.Data
        }
    } , // å­˜å‚¨token æ–¹æ³•
},
{
    requestOptions: {
        urlPrefix: 'api'
    }
});
```



## é»˜è®¤é…ç½®å‚æ•°

`createXhttp(transformOpt: transformOptType, axiosOpt: Partial<CreateAxiosOptions>) ` æ–¹æ³•å‚æ•°

### transformOpt å‚æ•°

| å‚æ•°                         | åŠŸèƒ½                      | ç±»å‹                                           | é»˜è®¤å€¼                     |
| ---------------------------- | ------------------------- | ---------------------------------------------- | -------------------------- |
| `Message`ï¼ˆå¯é€‰ï¼‰            | æ¶ˆæ¯æç¤ºç»„ä»¶              | `Function`                                     |                            |
| `Modal`ï¼ˆå¯é€‰ï¼‰              | æ¨¡æ€å¼¹çª—æç¤ºç»„ä»¶          | `Function`                                     |                            |
| `tokenKey`ï¼ˆå¯é€‰ï¼‰           | ç™»å½• token Key å€¼         | `string`                                       | `Bearer`                   |
| `tokenExpires`ï¼ˆå¯é€‰ï¼‰       | ç™»å½• token è¿‡æœŸæ—¶é—´       | `number`                                       | 7 å¤©                       |
| `storageType`ï¼ˆå¯é€‰ï¼‰        | token å­˜å‚¨ç±»å‹            | `localStorage` æˆ– `sessionStorage` æˆ– `cookie` | `localStorage`             |
| `getToken`ï¼ˆå¯é€‰ï¼‰           | è·å– token æ–¹æ³•           | `Function`                                     |                            |
| `setToken`ï¼ˆå¯é€‰ï¼‰           | è®¾ç½® token æ–¹æ³•           | `Function`                                     |                            |
| `logout`ï¼ˆå¯é€‰ï¼‰             | é€€å‡ºç™»å½•æ–¹æ³•              | `Function`                                     |                            |
| `addAjaxErrorInfo`ï¼ˆå¯é€‰ï¼‰   | æ·»åŠ  ajax é”™è¯¯æ—¥å¿—æ–¹æ³•    | `Function`                                     |                            |
| `statusMap`ï¼ˆå¯é€‰ï¼‰          | çŠ¶æ€ç å’Œå¤„ç†æ–¹æ³• map å¯¹è±¡ | ` Record<number, any>`                         |                            |
| `refreshTokenConfig`ï¼ˆå¯é€‰ï¼‰ | åˆ·æ–° token ç›¸å…³é…ç½®       | `refreshTokenType`                             | é»˜è®¤ä¸ºç©ºï¼Œä¸è‡ªåŠ¨åˆ·æ–° Token |
| `authorizationKey`           | token éªŒè¯ key å€¼         | `string`                                       | `Authorization`            |

#### refreshTokenConfig å‚æ•°

refreshTokenConfig é»˜è®¤ä¸ºç©ºï¼Œä¸åˆ·æ–° Tokenï¼Œä¼ å…¥ refreshTokenConfig ç›¸å…³é…ç½®åï¼Œæ ¹æ®ä¼ å…¥ token è¿‡æœŸæ—¶é—´å’Œæ—¶é—´é—´éš”ï¼Œåœ¨æ¯æ¬¡è¯·æ±‚ä¹‹å‰è‡ªåŠ¨åˆ¤æ–­å½“å‰æ—¶é—´ä¸ token è¿‡æœŸæ—¶é—´å·®å°äºæŒ‡å®šåˆ·æ–°é—´éš”æ—¶é—´ï¼Œå¦‚æœæ˜¯ï¼Œè‡ªåŠ¨è¯·æ±‚åˆ·æ–° Token æ¥å£åˆ·æ–° Tokenï¼Œå¹¶å°†åç»­è¯·æ±‚ç¼“å­˜ï¼›å¾…åˆ·æ–° Token æ¥å£è¿”å›åï¼Œä½¿ç”¨æ–°çš„ token è¯·æ±‚ç¼“å­˜çš„è¯·æ±‚ã€‚

refreshTokenConfig ç›¸å…³é…ç½®ï¼š

| å‚æ•°                    | ç±»å‹   | è¯´æ˜                                                         |
| ----------------------- | ------ | ------------------------------------------------------------ |
| url ï¼ˆå¿…å¡«ï¼‰            | string | åˆ·æ–° token url                                               |
| interval ï¼ˆå¿…å¡«ï¼‰       | number | token åˆ·æ–°é—´éš”ï¼ˆå•ä½ä¸ºæ¯«ç§’ï¼‰                                 |
| expiresï¼ˆé€‰å¡«ï¼‰         | number | token  è¿‡æœŸæ—¶é—´ï¼ˆå•ä½ä¸ºæ¯«ç§’ï¼‰                                              |
| tokenExpiresKeyï¼ˆå¿…å¡«ï¼‰ | string | token è¿‡æœŸæ—¶é—´æœ¬åœ°å­˜å‚¨çš„ keyï¼Œå¦‚æœæ²¡æœ‰ä¼ å…¥expiresï¼Œåˆ™è‡ªåŠ¨ä»æœ¬åœ°é€šè¿‡ tokenExpiresKey è·å– token è¿‡æœŸæ—¶é—´ |
| refreshIdKeyï¼ˆé€‰å¡«ï¼‰    | string | token åˆ·æ–°id æœ¬åœ°å­˜å‚¨çš„ keyï¼Œå¦‚æœæ²¡æœ‰ ä¼ å…¥ refreshIdKeyï¼Œåˆ™åœ¨åˆ·æ–° token æ—¶ä¸ä¼šå‘åç«¯ä¼ é€’ refreshId å‚æ•° |
| refreshIdï¼ˆé€‰å¡«ï¼‰       | string | token åˆ·æ–°idï¼Œå¦‚æœä¸ä¼ ï¼Œåˆ™ä¸ä¼šå‘åˆ·æ–° token æ¥å£ä¼ å…¥è¯¥å‚æ•°    |
| paramsï¼ˆé€‰å¡«ï¼‰          | object | åˆ·æ–° token æ¥å£é¢å¤–å‚æ•°                                      |

åˆ·æ–° token é…ç½®ä½¿ç”¨æ–¹æ³•ï¼š

1. åˆ›å»ºç™»å½• xHttp è¯·æ±‚:

```typescript
import { createXhttp } from 'xw-ui/xhttp'

export default createXhttp({
    tokenKey: 'test-token', // token keyå€¼ï¼Œä¼ å…¥token keyå€¼ï¼Œé»˜è®¤ä½¿ç”¨å†…éƒ¨è·å–æ–¹æ³•
    tokenExpires: 1, // token è¿‡æœŸæ—¶é—´
    storageType: 'cookie', // å­˜å‚¨token æ–¹æ³•
    refreshTokenConfig: { // token è‡ªåŠ¨åˆ·æ–°é…ç½®
        url: '/refresh-token', // åˆ·æ–° token url
        interval: 20 * 60 * 1000, // token åˆ·æ–°æ—¶é—´é—´éš”ä¸º 20 åˆ†é’Ÿ
        tokenExpiresKey: 'test-tokenExpiresKey', // token è¿‡æœŸæ—¶é—´å­˜å‚¨ key
        refreshIdKey: 'test-refreshIdKey', // å­˜å‚¨ refreshId åˆ·æ–° token id çš„ key, é€‰å¡«ï¼Œä¸ä¼ å…¥åˆ™ä¸ä¼šå‘åˆ·æ–°token æ¥å£ä¸­ä¼ å…¥ refreshId å‚æ•°
       // expires: null, // ç™»å½•è¯·æ±‚æ¥å£ä¸­ï¼Œtoken è¿‡æœŸæ—¶é—´ä¸ºç©º
       // refreshId: null, // ç™»å½•è¯·æ±‚æ¥å£ä¸­ï¼ŒrefreshId åˆ·æ–° token id ä¸ºç©º
      
    },
    addAjaxErrorInfo: (error) => {
        console.log("ğŸš€ ==========é”™è¯¯æ—¥å¿—æ”¶é›†æ–¹æ³•===========", error)
    },

    logout: () => {
        console.log('==============logout é€€å‡ºç™»å½•æ–¹æ³•============')
    }
},
    {
        requestOptions: {
            urlPrefix: 'api'
        }
    });
```

2. å®šä¹‰ç™»å½•å’Œåˆ·æ–° token æ–¹æ³•ï¼š

```	typescript
import xHttp from '@/packages/http/index'

interface loginModel {
    name: string; // ç”¨æˆ·å
    password: string; // å¯†ç 
}

interface tokenRefreshModel {
    expire: string; // token è¿‡æœŸæ—¶é—´
    token: string; // token
    refreshId: string; // åˆ·æ–°token id
}

export function login(params: loginModel) {
    return xHttp.post<loginModel>(
        {
            url: '/login',
            params,
        },
        {
            errorMessageMode: 'modal',
        },
    );
}

export function refreshToken(params: tokenRefreshModel) {
    return xHttp.get(
        {
            url: '/refresh-token',
            params
        },
        {
            successMessageMode: 'message',
            errorMessageMode: 'message',
        },
    );
}
```

3.ä½¿ç”¨ Http ç™»å½•è¯·æ±‚è·å– token å¹¶å­˜å‚¨ tokenã€token è¿‡æœŸæ—¶é—´å’Œåˆ·æ–° token idï¼Œå¹¶å­˜å…¥æœ¬åœ°ï¼š

```javascript
import { login } from 'ä½ çš„apiè·¯å¾„/login'
import Cookies from 'js-cookie'

const {
    expire, // token è¿‡æœŸæ—¶é—´
    token, // token
    refreshId,// åˆ·æ–°token id
} = await login()

// å­˜å‚¨ token, æ³¨æ„å­˜å‚¨çš„ token keyå’Œå­˜å‚¨æ–¹æ¡ˆéœ€è¦åœ¨ createXhttp å‚æ•°ç›¸åŒï¼
Cookies.set('test-token', token);
//å­˜å‚¨ token è¿‡æœŸæ—¶é—´ï¼Œæ³¨æ„å­˜å‚¨çš„ token è¿‡æœŸæ—¶é—´å’Œå­˜å‚¨æ–¹æ¡ˆéœ€è¦åœ¨ createXhttp å‚æ•°ç›¸åŒï¼
Cookies.set('test-tokenExpiresKey', expire);
// å­˜å‚¨åˆ·æ–° token idï¼Œæ³¨æ„å­˜å‚¨çš„åˆ·æ–° token id å’Œå­˜å‚¨æ–¹æ¡ˆéœ€è¦åœ¨ createXhttp å‚æ•°ç›¸åŒï¼
Cookies.set('test-refreshIdKey', refreshId);
```





#### åˆ·æ–° token æ¥å£è¯´æ˜

åˆ·æ–° token æ¥å£é»˜è®¤ä¸º post è¯·æ±‚ï¼Œè¿”å›æ¥å£æ ¼å¼é»˜è®¤å¦‚ä¸‹ï¼š

```json
 {
 'code': 0,
 'message': 'åˆ·æ–° token æ¶ˆæ¯æç¤º',
 'result': {
     'token': `åˆ·æ–°åçš„ token`,
     'expires': 'åˆ·æ–°åçš„è¿‡æœŸæ—¶é—´ï¼Œé»˜è®¤æ¥æ”¶æ—¶é—´æˆ³'
  }
}
```



### axiosOpt å‚æ•°

| å‚æ•°                                      | åŠŸèƒ½                                                | ç±»å‹ | é»˜è®¤å€¼                                                       |
| ----------------------------------------- | --------------------------------------------------- | ---- | ------------------------------------------------------------ |
| axios é…ç½®                                |                                                     |      |                                                              |
| `authenticationScheme`                    | HTTP éªŒè¯                                           |      | authentication schemesï¼Œe.g: Bearer <br />authenticationScheme: 'Bearer', |
| `timeout`                                 | æ¥å£è¶…æ—¶ç­‰å¾…æ—¶é—´                                    |      | 10 * 1000                                                    |
| `headers`                                 | http å¤´å‚æ•°                                         |      | `{ 'Content-Type': ContentTypeEnum.JSON }`<br />   å¦‚æœæ˜¯form-dataæ ¼å¼ï¼š <br />`{ 'Content-Type': ContentTypeEnum.FORM_URLENCODED }` |
| `transform`                               | æ•°æ®å¤„ç†æ–¹å¼                                        |      |                                                              |
| `requestOptions`                          | è¯·æ±‚é€‰é¡¹                                            |      |                                                              |
| `requestOptions.joinPrefix`               | æ˜¯å¦å°† prefix æ·»åŠ åˆ°url                             |      | `true`                                                       |
| `requestOptions.isReturnNativeResponse`   | æ˜¯å¦è¿”å›åŸç”Ÿå“åº”å¤´ æ¯”å¦‚ï¼šéœ€è¦è·å–å“åº”å¤´æ—¶ä½¿ç”¨è¯¥å±æ€§ |      | `false`                                                      |
| `requestOptions.isTransformResponse`      | éœ€è¦å¯¹è¿”å›æ•°æ®è¿›è¡Œå¤„ç†                              |      | `true`                                                       |
| `requestOptions.joinParamsToUrl`          | postè¯·æ±‚çš„æ—¶å€™æ·»åŠ å‚æ•°åˆ° url                        |      | `false`                                                      |
| `requestOptions.formatDate`               | æ ¼å¼åŒ–æäº¤å‚æ•°æ—¶é—´                                  |      | `true`                                                       |
| `requestOptions.errorMessageMode`         | æ¶ˆæ¯æç¤ºç»„ä»¶                                        |      | `message`(å¯é€‰å‚æ•°ï¼š<br />`none æˆ– modal æˆ–message`)         |
| `requestOptions.apiUrl`                   | æ¥å£åœ°å€                                            |      | `''`                                                         |
| `requestOptions.urlPrefix`                | æ¥å£æ‹¼æ¥åœ°å€                                        |      | `''`                                                         |
| `requestOptions.joinTime`                 | æ˜¯å¦åŠ å…¥æ—¶é—´æˆ³                                      |      | `true`                                                       |
| `requestOptions.ignoreCancelToken`        | å¿½ç•¥é‡å¤è¯·æ±‚                                        |      | `true`                                                       |
| `requestOptions.withToken`                | æ˜¯å¦æºå¸¦token                                       |      | `true`                                                       |
| `requestOptions.retryRequest`             | è¯·æ±‚é‡è¯•é…ç½®                                        |      |                                                              |
| `requestOptions.retryRequest.isOpenRetry` | æ˜¯å¦å¼€å¯è¯·æ±‚é‡è¯•                                    |      | `true`                                                       |
| `requestOptions.retryRequest.count`       | è¯·æ±‚é‡è¯•æ¬¡æ•°                                        |      | `5`                                                          |
| `requestOptions.retryRequest.waitTime`    | è¯·æ±‚é‡è¯•ç­‰å¾…æ—¶é—´                                    |      | `100`                                                        |

